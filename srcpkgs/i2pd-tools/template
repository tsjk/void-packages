# Template file for 'i2pd-tools'
pkgname=i2pd-tools
version=2.58.0
revision=20251016
_i2pd_tools_gitrev=b483a59093460861f9a124eb8639268ace69d9cc
_i2pd_gitrev=80080fd8f5df5c8c07df044458eedbf8fbbbe86c
depends="i2pd>=${version}_1<=${version}_9999"
makedepends="zlib-devel boost-devel openssl-devel"
build_style=gnu-makefile
short_desc="Some useful tools for I2P"
maintainer="Daniel EyÃŸer <daniel.eysser@gmail.com>"
license="BSD-3-Clause"
homepage="https://github.com/PurpleI2P/i2pd-tools"
distfiles="
 https://github.com/PurpleI2P/i2pd-tools/archive/${_i2pd_tools_gitrev}.tar.gz
 https://github.com/PurpleI2P/i2pd/archive/${_i2pd_gitrev}.tar.gz"
checksum="
 3758d79b60b085b9f821043faacab89d0280934288168782cc239f4672794ff0
 abf2f1d9412e888c6824af09c5f3b855ea51c7b8cba736713c83d9e8b9c8e4eb"

post_extract() {
        ( cd i2pd-tools-${_i2pd_tools_gitrev} && rmdir i2pd && mv ../i2pd-${_i2pd_gitrev} i2pd )
	find i2pd-tools-${_i2pd_tools_gitrev} -mindepth 1 -maxdepth 1 -exec mv "{}" ./ \;
	rmdir i2pd-tools-${_i2pd_tools_gitrev}
}

do_install() {
	mv autoconf_i2pd autoconf
	local f
	for f in autoconf b33address famtool i2pbase64 keygen keyinfo offlinekeys regaddr regaddr_3ld regaddralias routerinfo x25519 verifyhost vain; do
		vinstall ${f} 0755 usr/bin/i2pd-${f}
	done
	vinstall scripts/i2pdctl 0755 usr/bin
	vlicense LICENSE
	vdoc README.md
}
