# Template file for 'i2pd-tools'
pkgname=i2pd-tools
version=2.57.0
revision=20250821
_i2pd_tools_gitrev=c7dea1f3ff1aefa62d30dba0e5c57e1322026ee3
_i2pd_gitrev=2716869af40616a5585adf8894ce59bd92f128d1
depends="i2pd>=${version}_1<=${version}_9999"
makedepends="zlib-devel boost-devel openssl-devel"
build_style=gnu-makefile
short_desc="Some useful tools for I2P"
maintainer="Daniel EyÃŸer <daniel.eysser@gmail.com>"
license="BSD-3-Clause"
homepage="https://github.com/PurpleI2P/i2pd-tools"
distfiles="
 https://github.com/PurpleI2P/i2pd-tools/archive/${_i2pd_tools_gitrev}.tar.gz
 https://github.com/PurpleI2P/i2pd/archive/${_i2pd_gitrev}.tar.gz"
checksum="
 b75e34d0c9e311e73c790b845f8a9b14bc81cbe0e14d4548520fdcd4431989ef
 f5392f9b118fe391e8e3be6fcd4ece2056d2573281b749371f1d9aa9107323df"

post_extract() {
        ( cd i2pd-tools-${_i2pd_tools_gitrev} && rmdir i2pd && mv ../i2pd-${_i2pd_gitrev} i2pd )
	find i2pd-tools-${_i2pd_tools_gitrev} -mindepth 1 -maxdepth 1 -exec mv "{}" ./ \;
	rmdir i2pd-tools-${_i2pd_tools_gitrev}
}

do_install() {
	local f
	for f in autoconf b33address famtool i2pbase64 keygen keyinfo offlinekeys regaddr regaddr_3ld regaddralias routerinfo x25519 verifyhost vain; do
		vinstall ${f} 0755 usr/bin/i2pd-${f}
	done
	vinstall scripts/i2pdctl 0755 usr/bin
	vlicense LICENSE
	vdoc README.md
}
